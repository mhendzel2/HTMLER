(()=>{var e={};e.id=4238,e.ids=[4238],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6435:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d}),s(9307),s(5688),s(7564),s(5866);var a=s(3191),r=s(8716),i=s(7922),l=s.n(i),n=s(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["dashboard",{children:["watchlist",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9307)),"C:\\Users\\mjhen\\HTER\\HTMLER\\app\\dashboard\\watchlist\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5688)),"C:\\Users\\mjhen\\HTER\\HTMLER\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7564)),"C:\\Users\\mjhen\\HTER\\HTMLER\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\mjhen\\HTER\\HTMLER\\app\\dashboard\\watchlist\\page.tsx"],x="/dashboard/watchlist/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/watchlist/page",pathname:"/dashboard/watchlist",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3757:(e,t,s)=>{Promise.resolve().then(s.bind(s,2224))},2224:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(326),r=s(7577),i=s(3071),l=s(772),n=s(4432),c=s(567),d=s(4186),o=s(2881);let x=(0,o.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),h=(0,o.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var m=s(7069),u=s(9163);let p=(0,o.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),f=(0,o.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),g=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),y=e=>new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(e/100),j=e=>/^[A-Z]{1,5}$/.test(e);function b(){let[e,t]=(0,r.useState)(!0),[s,o]=(0,r.useState)(!1),[b,v]=(0,r.useState)([]),[N,k]=(0,r.useState)(""),[w,M]=(0,r.useState)({}),[P,C]=(0,r.useState)(""),[E,Z]=(0,r.useState)(!1),_=async()=>{o(!0);try{let e=await fetch("/api/watchlist");if(e.ok){let t=await e.json(),s=Array.isArray(t)?t:[];v(s);let a=s.find(e=>e.isDefault);a?k(a.id):s.length>0&&k(s[0].id);let r=s.flatMap(e=>e.items.map(e=>e.stock.ticker));await S(r)}}catch(e){console.error("Failed to fetch watchlists:",e)}finally{o(!1),t(!1)}},S=async e=>{if(0!==e.length)try{let t={},s=e.map(async e=>{try{let s=await fetch(`/api/stocks/${e}?type=state`);if(s.ok){let a=await s.json();a&&(t[e]={ticker:e,price:a.last_price||0,change:a.change||0,changePercent:a.change_percent||0,volume:a.volume||0})}}catch(t){console.error(`Failed to fetch quote for ${e}:`,t)}});await Promise.all(s),M(t)}catch(e){console.error("Failed to fetch stock quotes:",e),M({})}},R=async e=>{if(e.trim()&&j(e)){Z(!0);try{let t=await fetch(`/api/watchlist/${N}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticker:e.toUpperCase()})});if(t.ok)C(""),await _();else{let e=await t.json();alert(e.error||"Failed to add stock")}}catch(e){console.error("Failed to add stock:",e),alert("Failed to add stock")}finally{Z(!1)}}},T=async e=>{try{(await fetch(`/api/watchlist/${N}/items/${e}`,{method:"DELETE"})).ok&&await _()}catch(e){console.error("Failed to remove stock:",e)}},A=(Array.isArray(b)?b:[]).find(e=>e.id===N);return e?(0,a.jsxs)("div",{className:"flex-1 overflow-auto",children:[a.jsx(d.h,{title:"Watchlists",description:"Manage your stock watchlists"}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):(0,a.jsxs)("div",{className:"flex-1 overflow-auto",children:[a.jsx(d.h,{title:"Watchlists",description:"Manage and monitor your stock watchlists",onRefresh:_,refreshing:s}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex space-x-2",children:b.map(e=>a.jsx("button",{onClick:()=>k(e.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N===e.id?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isDefault&&a.jsx(x,{className:"h-4 w-4"}),a.jsx("span",{children:e.name}),a.jsx(c.C,{variant:"secondary",className:"text-xs",children:e.items.length})]})},e.id))}),(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>alert("Create new watchlist functionality coming soon!"),children:[a.jsx(h,{className:"h-4 w-4 mr-2"}),"New Watchlist"]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{className:"text-lg",children:["Add Stock to ",A?.name]}),a.jsx(i.SZ,{children:"Enter a stock ticker to add it to your watchlist"})]}),a.jsx(i.aY,{children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(n.I,{placeholder:"Enter ticker symbol (e.g., AAPL)",value:P,onChange:e=>C(e.target.value.toUpperCase()),onKeyDown:e=>{"Enter"===e.key&&R(P)},disabled:E}),a.jsx(l.z,{onClick:()=>R(P),disabled:!P.trim()||!j(P)||E,children:E?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(h,{className:"h-4 w-4"})})]})})]}),a.jsx("div",{className:"space-y-4",children:A?.items.length===0?a.jsx(i.Zb,{children:a.jsx(i.aY,{className:"flex items-center justify-center h-32",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(x,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Your watchlist is empty"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Add some stocks to get started"})]})})}):A?.items.map(e=>{let t=w[e.stock.ticker],s=t?.change>=0;return a.jsx(i.Zb,{className:"hover:shadow-lg transition-shadow",children:a.jsxs(i.aY,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:e.stock.ticker})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:e.stock.ticker}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.stock.companyName||"Loading..."}),e.stock.sector&&a.jsx(c.C,{variant:"outline",className:"mt-1",children:e.stock.sector})]})]}),t&&a.jsxs("div",{className:"flex items-center space-x-8",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Price"}),a.jsx("p",{className:"text-2xl font-bold",children:g(t.price)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Change"}),a.jsxs("div",{className:`flex items-center space-x-1 ${s?"text-green-600":"text-red-600"}`,children:[s?a.jsx(m.Z,{className:"h-4 w-4"}):a.jsx(u.Z,{className:"h-4 w-4"}),a.jsxs("span",{className:"font-semibold",children:[g(Math.abs(t.change))," (",y(Math.abs(t.changePercent)),")"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Volume"}),a.jsxs("p",{className:"font-semibold",children:[(t.volume/1e6).toFixed(1),"M"]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(l.z,{variant:"outline",size:"sm",children:a.jsx(p,{className:"h-4 w-4"})}),a.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>T(e.id),children:a.jsx(f,{className:"h-4 w-4"})})]})]}),e.notes&&a.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("strong",{children:"Notes:"})," ",e.notes]})})]})},e.id)})})]})]})}},4186:(e,t,s)=>{"use strict";s.d(t,{h:()=>n});var a=s(326),r=s(772),i=s(1405),l=s(6507);function n({title:e,description:t,onRefresh:s,refreshing:n=!1,showRefresh:c=!0}){return a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),t&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[c&&s&&(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:s,disabled:n,className:"flex items-center space-x-2",children:[a.jsx(i.Z,{className:`h-4 w-4 ${n?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]}),a.jsx(r.z,{variant:"outline",size:"icon",children:a.jsx(l.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Analytics User"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Personal Dashboard"})]}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-white",children:"U"})})]})]})]})})}},567:(e,t,s)=>{"use strict";s.d(t,{C:()=>n});var a=s(326);s(7577);var r=s(8671),i=s(7863);let l=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:t,...s}){return a.jsx("div",{className:(0,i.cn)(l({variant:t}),e),...s})}},4432:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var a=s(326),r=s(7577),i=s(7863);let l=r.forwardRef(({className:e,type:t,...s},r)=>a.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));l.displayName="Input"},6507:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},1405:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9307:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\mjhen\HTER\HTMLER\app\dashboard\watchlist\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,2643,5524,9308],()=>s(6435));module.exports=a})();