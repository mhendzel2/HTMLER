(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{4644:function(e,t,s){Promise.resolve().then(s.bind(s,4896))},4896:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(7437),a=s(2265),n=s(6070),i=s(2869),c=s(5186),l=s(5974),o=s(7064),d=s(9205);let u=(0,d.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),x=(0,d.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var f=s(525),m=s(3085);let h=(0,d.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),p=(0,d.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),g=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),y=e=>new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(e/100),v=e=>/^[A-Z]{1,5}$/.test(e);function b(){let[e,t]=(0,a.useState)(!0),[s,d]=(0,a.useState)(!1),[b,j]=(0,a.useState)([]),[N,k]=(0,a.useState)(""),[w,Z]=(0,a.useState)({}),[C,S]=(0,a.useState)(""),[F,M]=(0,a.useState)(!1),D=async()=>{d(!0);try{let e=await fetch("/api/watchlist");if(e.ok){let t=await e.json(),s=Array.isArray(t)?t:[];j(s);let r=s.find(e=>e.isDefault);r?k(r.id):s.length>0&&k(s[0].id);let a=s.flatMap(e=>e.items.map(e=>e.stock.ticker));await z(a)}}catch(e){console.error("Failed to fetch watchlists:",e)}finally{d(!1),t(!1)}},z=async e=>{if(0!==e.length)try{let t={},s=e.map(async e=>{try{let s=await fetch(`/api/stocks/${e}?type=state`);if(s.ok){let r=await s.json();r&&(t[e]={ticker:e,price:r.last_price||0,change:r.change||0,changePercent:r.change_percent||0,volume:r.volume||0})}}catch(t){console.error(`Failed to fetch quote for ${e}:`,t)}});await Promise.all(s),Z(t)}catch(e){console.error("Failed to fetch stock quotes:",e),Z({})}},$=async e=>{if(e.trim()&&v(e)){M(!0);try{let t=await fetch(`/api/watchlist/${N}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticker:e.toUpperCase()})});if(t.ok)S(""),await D();else{let e=await t.json();alert(e.error||"Failed to add stock")}}catch(e){console.error("Failed to add stock:",e),alert("Failed to add stock")}finally{M(!1)}}},U=async e=>{try{(await fetch(`/api/watchlist/${N}/items/${e}`,{method:"DELETE"})).ok&&await D()}catch(e){console.error("Failed to remove stock:",e)}};(0,a.useEffect)(()=>{D()},[]);let A=(Array.isArray(b)?b:[]).find(e=>e.id===N);return e?(0,r.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,r.jsx)(o.h,{title:"Watchlists",description:"Manage your stock watchlists"}),(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):(0,r.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,r.jsx)(o.h,{title:"Watchlists",description:"Manage and monitor your stock watchlists",onRefresh:D,refreshing:s}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex space-x-2",children:b.map(e=>(0,r.jsx)("button",{onClick:()=>k(e.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N===e.id?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isDefault&&(0,r.jsx)(u,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.name}),(0,r.jsx)(l.C,{variant:"secondary",className:"text-xs",children:e.items.length})]})},e.id))}),(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>alert("Create new watchlist functionality coming soon!"),children:[(0,r.jsx)(x,{className:"h-4 w-4 mr-2"}),"New Watchlist"]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsxs)(n.ll,{className:"text-lg",children:["Add Stock to ",A?.name]}),(0,r.jsx)(n.SZ,{children:"Enter a stock ticker to add it to your watchlist"})]}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(c.I,{placeholder:"Enter ticker symbol (e.g., AAPL)",value:C,onChange:e=>S(e.target.value.toUpperCase()),onKeyDown:e=>{"Enter"===e.key&&$(C)},disabled:F}),(0,r.jsx)(i.z,{onClick:()=>$(C),disabled:!C.trim()||!v(C)||F,children:F?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,r.jsx)(x,{className:"h-4 w-4"})})]})})]}),(0,r.jsx)("div",{className:"space-y-4",children:A?.items.length===0?(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"flex items-center justify-center h-32",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(u,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Your watchlist is empty"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Add some stocks to get started"})]})})}):A?.items.map(e=>{let t=w[e.stock.ticker],s=t?.change>=0;return r.jsx(n.Zb,{className:"hover:shadow-lg transition-shadow",children:r.jsxs(n.aY,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:e.stock.ticker})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.stock.ticker}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.stock.companyName||"Loading..."}),e.stock.sector&&r.jsx(l.C,{variant:"outline",className:"mt-1",children:e.stock.sector})]})]}),t&&r.jsxs("div",{className:"flex items-center space-x-8",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Price"}),r.jsx("p",{className:"text-2xl font-bold",children:g(t.price)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Change"}),r.jsxs("div",{className:`flex items-center space-x-1 ${s?"text-green-600":"text-red-600"}`,children:[s?r.jsx(f.Z,{className:"h-4 w-4"}):r.jsx(m.Z,{className:"h-4 w-4"}),r.jsxs("span",{className:"font-semibold",children:[g(Math.abs(t.change))," (",y(Math.abs(t.changePercent)),")"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Volume"}),r.jsxs("p",{className:"font-semibold",children:[(t.volume/1e6).toFixed(1),"M"]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(i.z,{variant:"outline",size:"sm",children:r.jsx(h,{className:"h-4 w-4"})}),r.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>U(e.id),children:r.jsx(p,{className:"h-4 w-4"})})]})]}),e.notes&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("strong",{children:"Notes:"})," ",e.notes]})})]})},e.id)})})]})]})}},7064:function(e,t,s){"use strict";s.d(t,{h:function(){return c}});var r=s(7437),a=s(2869),n=s(7168),i=s(4766);function c({title:e,description:t,onRefresh:s,refreshing:c=!1,showRefresh:l=!0}){return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),t&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[l&&s&&(0,r.jsxs)(a.z,{variant:"outline",size:"sm",onClick:s,disabled:c,className:"flex items-center space-x-2",children:[(0,r.jsx)(n.Z,{className:`h-4 w-4 ${c?"animate-spin":""}`}),(0,r.jsx)("span",{children:"Refresh"})]}),(0,r.jsx)(a.z,{variant:"outline",size:"icon",children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Analytics User"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Personal Dashboard"})]}),(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-medium text-white",children:"U"})})]})]})]})})}},5974:function(e,t,s){"use strict";s.d(t,{C:function(){return c}});var r=s(7437);s(2265);var a=s(7712),n=s(4508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:t,...s}){return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var r=s(7437),a=s(2265),n=s(7053),i=s(7712),c=s(4508);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},o)=>{let d=a?n.g7:"button";return(0,r.jsx)(d,{className:(0,c.cn)(l({variant:t,size:s,className:e})),ref:o,...i})});o.displayName="Button"},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var r=s(7437),a=s(2265),n=s(4508);let i=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));c.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},5186:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(7437),a=s(2265),n=s(4508);let i=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Input"},4508:function(e,t,s){"use strict";s.d(t,{Z8:function(){return o},cn:function(){return n},fP:function(){return c},p6:function(){return l},xG:function(){return i}});var r=s(1994),a=s(3335);function n(...e){return(0,a.m6)((0,r.W)(e))}function i(e,t="USD"){let s="string"==typeof e?parseFloat(e):e;return isNaN(s)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(s)}function c(e){let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"0":t>=1e9?`${(t/1e9).toFixed(2)}B`:t>=1e6?`${(t/1e6).toFixed(2)}M`:t>=1e3?`${(t/1e3).toFixed(2)}K`:t.toFixed(0)}function l(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function o(){let e=new Date(new Date().toLocaleString("en-US",{timeZone:"America/New_York"})),t=e.getHours(),s=e.getMinutes(),r=e.getDay();if(0===r||6===r)return"closed";let a=60*t+s;return a<570?"pre-market":a>=570&&a<960?"open":"after-hours"}},4766:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},7168:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3085:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},525:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}},function(e){e.O(0,[73,478,117,744],function(){return e(e.s=4644)}),_N_E=e.O()}]);