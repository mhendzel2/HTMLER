(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[169],{1627:function(e,t,s){Promise.resolve().then(s.bind(s,3386))},3386:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return D}});var a=s(7437),r=s(2265),n=s(7064),i=s(6070),l=s(5974),c=s(6815),o=s(3647),d=s(2339),m=s(2869),h=s(6840),x="horizontal",u=["horizontal","vertical"],p=r.forwardRef((e,t)=>{let{decorative:s,orientation:r=x,...n}=e,i=u.includes(r)?r:x;return(0,a.jsx)(h.WV.div,{"data-orientation":i,...s?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"},...n,ref:t})});p.displayName="Separator";var f=s(4508);let g=r.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...r},n)=>(0,a.jsx)(p,{ref:n,decorative:s,orientation:t,className:(0,f.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...r}));g.displayName=p.displayName;let y=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));y.displayName="Textarea";var j=s(525),w=s(3085),b=s(6865),v=s(4972),N=s(7168);let _=(0,s(9205).Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var k=s(2208);function C({earningsData:e,marketData:t,alertsData:s,className:n}){let[c,d]=(0,r.useState)([]),[h,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)("earnings"),[C,S]=(0,r.useState)(null),[F,M]=(0,r.useState)(""),$=async(e,t,s)=>{x(!0);try{let a=await fetch("/api/ai/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,data:t,context:s})});if(a.ok)return(await a.json()).tradeIdea}catch(e){console.error("Failed to generate analysis:",e)}finally{x(!1)}return null},Z=async()=>{if(!e||0===e.length)return;let t=[];for(let s of e.slice(0,3)){let e=await $("earnings",s);e&&t.push(e)}d(t)},T=async()=>{if(!t)return;let e=await $("market",t,"market_overview");e&&d([e])},A=async()=>{if(!s||0===s.length)return;let e=[];for(let t of s.slice(0,3)){let s=await $("alert",t);s&&e.push(s)}d(e)},D=async()=>{if(!F.trim())return;let a={customQuery:F,marketData:t,earningsData:e?.slice(0,5),alertsData:s?.slice(0,5)},r=await $("general",a,"custom_analysis");r&&d([r])},E=e=>{switch(e){case"BULLISH":return(0,a.jsx)(j.Z,{className:"h-4 w-4 text-green-600"});case"BEARISH":return(0,a.jsx)(w.Z,{className:"h-4 w-4 text-red-600"});default:return(0,a.jsx)(b.Z,{className:"h-4 w-4 text-yellow-600"})}},P=e=>{switch(e){case"BULLISH":return"bg-green-100 text-green-800 border-green-200";case"BEARISH":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}},O=e=>{switch(e){case"LOW":return"bg-green-100 text-green-800";case"HIGH":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},z=e=>e>=8?"bg-green-100 text-green-800":e>=6?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return(0,a.jsxs)(i.Zb,{className:(0,f.cn)("w-full",n),children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)(i.ll,{children:"AI Trading Guidance"})]}),(0,a.jsxs)(m.z,{onClick:()=>{switch(u){case"earnings":Z();break;case"market":T();break;case"alerts":A()}},disabled:h,size:"sm",className:"flex items-center space-x-1",children:[(0,a.jsx)(N.Z,{className:(0,f.cn)("h-4 w-4",h&&"animate-spin")}),(0,a.jsx)("span",{children:"Analyze"})]})]}),(0,a.jsx)(i.SZ,{children:"AI-powered trade ideas and market insights based on real-time data"})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)(o.Ph,{value:u,onValueChange:e=>{p(e),d([]),S(null)},children:[(0,a.jsx)(o.i4,{className:"w-48",children:(0,a.jsx)(o.ki,{placeholder:"Select analysis type"})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"earnings",children:"Earnings Analysis"}),(0,a.jsx)(o.Ql,{value:"market",children:"Market Overview"}),(0,a.jsx)(o.Ql,{value:"alerts",children:"Alert Analysis"})]})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y,{placeholder:"Ask AI about specific tickers, strategies, or market conditions...",value:F,onChange:e=>M(e.target.value),className:"min-h-[80px]"}),(0,a.jsxs)(m.z,{onClick:D,disabled:h||!F.trim(),size:"sm",children:[(0,a.jsx)(_,{className:"h-4 w-4 mr-2"}),"Custom Analysis"]})]}),(0,a.jsx)(g,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[h&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(N.Z,{className:"h-6 w-6 animate-spin text-blue-600"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Generating AI insights..."})]}),0===c.length&&!h&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(v.Z,{className:"h-12 w-12 mx-auto text-gray-400 mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:'Click "Analyze" to generate AI-powered trade ideas'})]}),c.map((e,t)=>(0,a.jsxs)(i.Zb,{className:"border-l-4 border-l-blue-500",children:[(0,a.jsxs)(i.Ol,{className:"pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.C,{variant:"outline",className:"font-mono",children:e.ticker}),(0,a.jsxs)(l.C,{className:P(e.direction),children:[E(e.direction),(0,a.jsx)("span",{className:"ml-1",children:e.direction})]}),(0,a.jsxs)(l.C,{className:z(e.confidence),children:[e.confidence,"/10"]}),(0,a.jsxs)(l.C,{className:O(e.riskLevel),children:[e.riskLevel," RISK"]})]}),(0,a.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>S(C===t?null:t),children:(0,a.jsx)(k.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)(i.ll,{className:"text-lg",children:e.strategy}),(0,a.jsx)(i.SZ,{className:"text-sm",children:e.timeframe})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("p",{className:"text-sm mb-3",children:e.rationale}),C===t&&(0,a.jsxs)("div",{className:"space-y-3 pt-3 border-t",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-sm mb-2",children:"Key Factors:"}),(0,a.jsx)("ul",{className:"space-y-1",children:e.keyFactors.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,a.jsx)("span",{className:"text-blue-500 mr-2",children:"â€¢"}),e]},t))})]}),(e.entryPrice||e.targetPrice||e.stopLoss)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-sm mb-2",children:"Price Levels:"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.entryPrice&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Entry:"}),(0,a.jsxs)("span",{className:"ml-1 font-medium",children:["$",e.entryPrice]})]}),e.targetPrice&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Target:"}),(0,a.jsxs)("span",{className:"ml-1 font-medium text-green-600",children:["$",e.targetPrice]})]}),e.stopLoss&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Stop:"}),(0,a.jsxs)("span",{className:"ml-1 font-medium text-red-600",children:["$",e.stopLoss]})]})]})]})]})]})]},t))]})]})]})}var S=s(3344);class F{static getInstance(){return F.instance||(F.instance=new F),F.instance}async startEarningsFlowMonitoring(e){if(this.isMonitoring){console.log("Flow monitoring already active");return}console.log("\uD83D\uDE80 Starting FULL WebSocket earnings flow monitoring with authenticated access for:",e),this.isMonitoring=!0,await S.O.startRealTimeMonitoring()?(console.log("âœ… FULL WebSocket access confirmed - enabling ALL institutional-grade filters!"),S.O.subscribeToFilter("big-money-otm-whales",t=>{this.processEarningsAlert(t,e)}),S.O.subscribeToFilter("dark-pool-correlation",t=>{this.processEarningsAlert(t,e)}),S.O.subscribeToFilter("aggressive-short-term",t=>{this.processEarningsAlert(t,e)}),console.log(`ðŸ“¡ Real-time institutional flow monitoring active for ${e.length} earnings tickers`)):console.log("âš ï¸ Fallback: WebSocket connection failed, using polling mode")}processEarningsAlert(e,t){if(!t.includes(e.ticker))return;console.log(`ðŸ“Š Earnings flow detected: ${e.ticker} - ${e.sentiment} - ${this.formatPremium(e.premium)}`),this.flowCache.has(e.ticker)||this.flowCache.set(e.ticker,[]);let s=this.flowCache.get(e.ticker);s.push(e),s.length>50&&s.splice(0,s.length-50),this.updateTickerSentiment(e.ticker)}updateTickerSentiment(e){let t;let s=this.flowCache.get(e)||[];if(0===s.length){this.sentimentCache.set(e,"neutral");return}let a=Date.now(),r=0,n=0,i=0;s.forEach(e=>{let t=(Math.max(0,1-(a-e.timestamp)/864e5)*Math.min(e.premium/1e6,5)+1)/2;i+=t,"bullish"===e.sentiment?r+=t:"bearish"===e.sentiment&&(n+=t)});let l=r/i,c=n/i;t=l>.6?"bullish":c>.6?"bearish":"neutral",this.sentimentCache.set(e,t),console.log(`ðŸ“ˆ Updated sentiment for ${e}: ${t} (${l.toFixed(2)} bullish, ${c.toFixed(2)} bearish)`)}getEarningsFlowSentiment(e){let t={};return e.forEach(e=>{t[e]=this.sentimentCache.get(e)||"neutral"}),t}getFlowAnalysisForTickers(e){let t={};return e.forEach(e=>{let s=this.getFlowStatistics(e),a=this.getTickerFlow(e),r=a.filter(e=>"call"===e.type),n=a.filter(e=>"put"===e.type),i=r.reduce((e,t)=>e+t.premium,0),l=n.reduce((e,t)=>e+t.premium,0),c=r.length+n.length>0?r.length/(r.length+n.length):.5,o=Math.min(90,5*a.length);o=Math.min(95,o+Math.abs(s.bullishCount-s.bearishCount)/Math.max(1,a.length)*30);let d=[],m=[],h=[],x=[];s.bullishCount>1.5*s.bearishCount&&d.push(`Strong call activity (${s.bullishCount} vs ${s.bearishCount})`),s.bearishCount>1.5*s.bullishCount&&m.push(`Heavy put activity (${s.bearishCount} vs ${s.bullishCount})`),s.avgPremium>5e5&&d.push(`Large average trade size ($${(s.avgPremium/1e3).toFixed(0)}K)`);let u=a.map(e=>e.strike).filter((e,t,s)=>s.indexOf(e)===t);u.length>0&&h.push(...u.slice(0,3)),a.length<3&&x.push("Limited activity - low confidence"),t[e]={ticker:e,overall_sentiment:s.sentiment,confidence_score:Math.round(o),metrics:{net_premium_ratio:i+l>0?i/(i+l):.5,volume_ratio:c,delta_flow:i-l,gamma_exposure:.1*Math.abs(i-l),unusual_activity_score:Math.min(100,2*a.length),max_pain_distance:10*Math.random()},breakdown:{bullish_signals:d,bearish_signals:m,key_levels:h,risk_factors:x},last_updated:new Date().toISOString()}}),t}getTickerFlow(e){return this.flowCache.get(e)||[]}getFlowStatistics(e){let t=this.flowCache.get(e)||[],s=this.sentimentCache.get(e)||"neutral",a=t.reduce((e,t)=>e+t.premium,0),r=t.filter(e=>"bullish"===e.sentiment).length,n=t.filter(e=>"bearish"===e.sentiment).length;return{totalPremium:a,alertCount:t.length,avgPremium:t.length>0?a/t.length:0,bullishCount:r,bearishCount:n,sentiment:s}}stopEarningsFlowMonitoring(){console.log("Stopping earnings flow monitoring"),this.isMonitoring=!1,S.O.unsubscribeFromFilter("big-money-otm-whales"),S.O.unsubscribeFromFilter("dark-pool-correlation"),S.O.unsubscribeFromFilter("aggressive-short-term"),this.monitoringTickers.clear()}updateGEXData(e,t){this.gexCache.set(e,{...t,timestamp:Date.now()}),console.log(`ðŸ“Š Updated GEX data for ${e}: Total GEX ${t.totalGEX||"N/A"}`)}updatePriceContext(e,t){this.priceCache.set(e,{...t,timestamp:Date.now()});let s=this.priceCache.get(e)?.previousPrice;if(s&&t.price){let a=(t.price-s)/s;console.log(`ðŸ’¹ ${e} price update: ${a>=0?"+":""}${(100*a).toFixed(2)}%`)}}formatPremium(e){return e>=1e6?`$${(e/1e6).toFixed(2)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`}constructor(){this.flowCache=new Map,this.sentimentCache=new Map,this.gexCache=new Map,this.priceCache=new Map,this.monitoringTickers=new Set,this.isMonitoring=!1}}let M=F.getInstance();var $=s(740),Z=s(1047),T=s(1723),A=s(4401);function D(){let[e,t]=(0,r.useState)(!0),[s,l]=(0,r.useState)(!1),[m,h]=(0,r.useState)([]),[x,u]=(0,r.useState)([]),[p,f]=(0,r.useState)("today"),[g,y]=(0,r.useState)({putCallRatioMin:.8,putCallRatioMax:1.3,marketCapMin:1e9,liquidityMin:200,hasOptions:!0,isSpx:null,sector:"all",timeFrame:14}),j=async()=>{l(!0);try{let e=[],t=new Date;for(let s=0;s<10;s++){let a=new Date(t);if(a.setDate(t.getDate()+s),0!==a.getDay()&&6!==a.getDay()&&e.push(a.toISOString().split("T")[0]),e.length>=7)break}let s=[];for(let t of e)try{let[e,a]=await Promise.all([fetch(`/api/earnings?type=afterhours&date=${t}&limit=100`),fetch(`/api/earnings?type=premarket&date=${t}&limit=100`)]);if(e.ok){let t=await e.json();t.data&&s.push(...t.data.map(e=>({symbol:e.symbol,full_name:e.full_name,report_date:e.report_date,report_time:"aftermarket",expected_move:e.expected_move||"0",expected_move_perc:e.expected_move_perc||"0",street_mean_est:e.street_mean_est||"0",actual_eps:e.actual_eps,marketcap:e.marketcap||"0",has_options:e.has_options||!1,is_s_p_500:e.is_s_p_500||!1,sector:e.sector||"Unknown",flow_loading:!0})))}if(a.ok){let e=await a.json();e.data&&s.push(...e.data.map(e=>({symbol:e.symbol,full_name:e.full_name,report_date:e.report_date,report_time:"premarket",expected_move:e.expected_move||"0",expected_move_perc:e.expected_move_perc||"0",street_mean_est:e.street_mean_est||"0",actual_eps:e.actual_eps,marketcap:e.marketcap||"0",has_options:e.has_options||!1,is_s_p_500:e.is_s_p_500||!1,sector:e.sector||"Unknown",flow_loading:!0})))}}catch(e){console.error(`Failed to fetch earnings for ${t}:`,e)}let a=s.reduce((e,t)=>(e.find(e=>e.symbol===t.symbol&&e.report_date===t.report_date)||e.push(t),e),[]);a.sort((e,t)=>new Date(e.report_date).getTime()-new Date(t.report_date).getTime()),h(a),u(a),w(a.filter(e=>e.has_options))}catch(e){console.error("Failed to fetch earnings data:",e),h([]),u([])}finally{l(!1),t(!1)}},w=async e=>{if(0!==e.length)try{console.log("\uD83D\uDE80 Starting FULL WebSocket-based institutional flow analysis with authenticated access!");let t=[...new Set(e.map(e=>e.symbol))];console.log(`ï¿½ Real-time institutional monitoring for ${t.length} earnings tickers with full access:`,t.slice(0,5)),await M.startEarningsFlowMonitoring(t);let s=M.getFlowAnalysisForTickers(t);h(e=>e.map(e=>({...e,flow_sentiment:s[e.symbol]||void 0,flow_loading:!1}))),u(e=>e.map(e=>({...e,flow_sentiment:s[e.symbol]||void 0,flow_loading:!1})));let a=setInterval(()=>{let e=M.getFlowAnalysisForTickers(t);h(t=>t.map(t=>({...t,flow_sentiment:e[t.symbol]||t.flow_sentiment||void 0}))),u(t=>t.map(t=>({...t,flow_sentiment:e[t.symbol]||t.flow_sentiment||void 0})))},5e3);return()=>{clearInterval(a),M.stopEarningsFlowMonitoring()}}catch(t){console.error("Failed to start enhanced flow analysis:",t),console.log("Falling back to API-based flow analysis...");try{let t=e.slice(0,10),s=[...new Set(t.map(e=>e.symbol))].join(","),a=await fetch(`/api/flow-analysis?tickers=${encodeURIComponent(s)}`);if(a.ok){let{data:e}=await a.json();h(t=>t.map(t=>({...t,flow_sentiment:e[t.symbol],flow_loading:!1}))),u(t=>t.map(t=>({...t,flow_sentiment:e[t.symbol],flow_loading:!1})))}}catch(e){console.error("Fallback API also failed:",e)}h(e=>e.map(e=>({...e,flow_loading:!1}))),u(e=>e.map(e=>({...e,flow_loading:!1})))}},b=(e,t)=>{let s=e;if("screener"===t)s=e.filter(e=>{if(parseFloat(e.marketcap)<g.marketCapMin||g.hasOptions&&!e.has_options||null!==g.isSpx&&e.is_s_p_500!==g.isSpx||"all"!==g.sector&&e.sector!==g.sector)return!1;let t=new Date(e.report_date),s=new Date,a=new Date;return a.setDate(s.getDate()+g.timeFrame),!(t<s)&&!(t>a)});else{let a=new Date;s=e.filter(e=>{let s=new Date(e.report_date);switch(t){case"today":return s.toDateString()===a.toDateString();case"upcoming":return s>a;default:return!0}})}u(s)};(0,r.useEffect)(()=>{j()},[]),(0,r.useEffect)(()=>{b(m,p)},[p,g,m]);let v=(e,t)=>{y(s=>({...s,[e]:t}))};return e?(0,a.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,a.jsx)(n.h,{title:"Earnings Analysis",description:"Track earnings announcements and performance"}),(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):(0,a.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,a.jsx)(n.h,{title:"Earnings Analysis",description:"Advanced earnings screening with real-time data",onRefresh:j,refreshing:s}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)(d.mQ,{value:p,onValueChange:e=>f(e),children:[(0,a.jsxs)(d.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(d.SP,{value:"today",children:["Today (",m.filter(e=>new Date(e.report_date).toDateString()===new Date().toDateString()).length,")"]}),(0,a.jsxs)(d.SP,{value:"upcoming",children:["Upcoming (",m.filter(e=>new Date(e.report_date)>new Date).length,")"]}),(0,a.jsxs)(d.SP,{value:"screener",children:["Screener (",x.length,")"]})]}),(0,a.jsx)(d.nU,{value:"today",className:"space-y-4",children:(0,a.jsx)(E,{data:x})}),(0,a.jsx)(d.nU,{value:"upcoming",className:"space-y-4",children:(0,a.jsx)(E,{data:x})}),(0,a.jsxs)(d.nU,{value:"screener",className:"space-y-4",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)($.Z,{className:"h-5 w-5"}),"Earnings Screener"]}),(0,a.jsx)(i.SZ,{children:"Filter earnings announcements by market cap, options availability, and more"})]}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{children:"Min Market Cap"}),(0,a.jsxs)(o.Ph,{value:g.marketCapMin.toString(),onValueChange:e=>v("marketCapMin",parseInt(e)),children:[(0,a.jsx)(o.i4,{children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"100000000",children:"$100M"}),(0,a.jsx)(o.Ql,{value:"1000000000",children:"$1B"}),(0,a.jsx)(o.Ql,{value:"10000000000",children:"$10B"}),(0,a.jsx)(o.Ql,{value:"50000000000",children:"$50B"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{children:"Time Frame"}),(0,a.jsxs)(o.Ph,{value:g.timeFrame.toString(),onValueChange:e=>v("timeFrame",parseInt(e)),children:[(0,a.jsx)(o.i4,{children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"7",children:"Next Week"}),(0,a.jsx)(o.Ql,{value:"14",children:"Next 2 Weeks"}),(0,a.jsx)(o.Ql,{value:"30",children:"Next Month"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{children:"Sector"}),(0,a.jsxs)(o.Ph,{value:g.sector,onValueChange:e=>v("sector",e),children:[(0,a.jsx)(o.i4,{children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"all",children:"All Sectors"}),(0,a.jsx)(o.Ql,{value:"Technology",children:"Technology"}),(0,a.jsx)(o.Ql,{value:"Healthcare",children:"Healthcare"}),(0,a.jsx)(o.Ql,{value:"Financial Services",children:"Financial Services"}),(0,a.jsx)(o.Ql,{value:"Consumer Cyclical",children:"Consumer Cyclical"}),(0,a.jsx)(o.Ql,{value:"Consumer Defensive",children:"Consumer Defensive"}),(0,a.jsx)(o.Ql,{value:"Energy",children:"Energy"}),(0,a.jsx)(o.Ql,{value:"Industrials",children:"Industrials"}),(0,a.jsx)(o.Ql,{value:"Communication Services",children:"Communication Services"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{children:"Options"}),(0,a.jsxs)(o.Ph,{value:g.hasOptions.toString(),onValueChange:e=>v("hasOptions","true"===e),children:[(0,a.jsx)(o.i4,{children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"false",children:"All Stocks"}),(0,a.jsx)(o.Ql,{value:"true",children:"Options Only"})]})]})]})]})})]}),(0,a.jsx)(E,{data:x})]})]}),(0,a.jsx)(C,{earningsData:x,className:"mt-6"})]})]})}function E({data:e}){return 0===e.length?(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"flex items-center justify-center h-32",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(Z.Z,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No earnings data available"})]})})}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:e.map((e,t)=>(0,a.jsx)(i.Zb,{className:"hover:shadow-lg transition-shadow",children:(0,a.jsxs)(i.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-lg font-bold",children:e.symbol}),e.is_s_p_500&&(0,a.jsx)(l.C,{variant:"secondary",children:"S&P 500"}),e.has_options&&(0,a.jsx)(l.C,{variant:"outline",children:"Options"})]}),(0,a.jsx)(i.ll,{className:"text-lg",children:e.symbol}),(0,a.jsx)(i.SZ,{className:"text-sm",children:e.full_name})]})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)(l.C,{className:`text-xs ${"premarket"===e.report_time?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:e.report_time})]}),(0,a.jsx)("p",{className:"text-sm font-medium",children:(0,f.p6)(e.report_date)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Expected Move"}),(0,a.jsx)("p",{className:"font-semibold",children:e.expected_move?`$${parseFloat(e.expected_move).toFixed(2)}`:"N/A"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.expected_move_perc?`${(100*parseFloat(e.expected_move_perc)).toFixed(2)}%`:"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Market Cap"}),(0,a.jsx)("p",{className:"font-semibold",children:e.marketcap?(0,f.xG)(parseFloat(e.marketcap)):"N/A"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"EPS Estimate"}),(0,a.jsx)("p",{className:"font-semibold",children:e.street_mean_est?`$${parseFloat(e.street_mean_est).toFixed(2)}`:"N/A"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Sector"}),(0,a.jsx)("p",{className:"text-xs font-medium",children:e.sector})]})]}),e.has_options&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Flow Sentiment"})]}),e.flow_loading?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):e.flow_sentiment&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.C,{variant:"bullish"===e.flow_sentiment.overall_sentiment?"default":"bearish"===e.flow_sentiment.overall_sentiment?"destructive":"secondary",className:"text-xs",children:e.flow_sentiment.overall_sentiment.toUpperCase()}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.flow_sentiment.confidence_score,"% confidence"]})]})]}),e.flow_sentiment&&!e.flow_loading&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[(0,a.jsxs)("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Premium Ratio"}),(0,a.jsx)("p",{className:"font-medium",children:e.flow_sentiment.metrics.net_premium_ratio.toFixed(2)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"C:P"})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Volume Ratio"}),(0,a.jsx)("p",{className:"font-medium",children:e.flow_sentiment.metrics.volume_ratio.toFixed(2)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"C:P"})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Delta Flow"}),(0,a.jsxs)("p",{className:"font-medium text-sm",children:[e.flow_sentiment.metrics.delta_flow>=0?"+":"","$",(e.flow_sentiment.metrics.delta_flow/1e6).toFixed(1),"M"]})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"GEX"}),(0,a.jsxs)("p",{className:"font-medium text-sm",children:[e.flow_sentiment.metrics.gamma_exposure>=0?"+":"","$",(Math.abs(e.flow_sentiment.metrics.gamma_exposure)/1e6).toFixed(1),"M"]})]})]}),e.flow_sentiment&&!e.flow_loading&&(0,a.jsxs)("div",{className:"mt-3",children:[e.flow_sentiment.breakdown.bullish_signals.length>0&&(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 text-green-600"}),(0,a.jsx)("span",{className:"text-xs font-medium text-green-600",children:"Bullish Signals:"})]}),(0,a.jsx)("ul",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-4",children:e.flow_sentiment.breakdown.bullish_signals.slice(0,2).map((e,t)=>(0,a.jsxs)("li",{className:"list-disc",children:["â€¢ ",e]},t))})]}),e.flow_sentiment.breakdown.bearish_signals.length>0&&(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,a.jsx)(w.Z,{className:"h-3 w-3 text-red-600"}),(0,a.jsx)("span",{className:"text-xs font-medium text-red-600",children:"Bearish Signals:"})]}),(0,a.jsx)("ul",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-4",children:e.flow_sentiment.breakdown.bearish_signals.slice(0,2).map((e,t)=>(0,a.jsxs)("li",{className:"list-disc",children:["â€¢ ",e]},t))})]}),e.flow_sentiment.breakdown.risk_factors.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,a.jsx)(b.Z,{className:"h-3 w-3 text-orange-600"}),(0,a.jsx)("span",{className:"text-xs font-medium text-orange-600",children:"Risk Factors:"})]}),(0,a.jsx)("ul",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-4",children:e.flow_sentiment.breakdown.risk_factors.slice(0,1).map((e,t)=>(0,a.jsxs)("li",{className:"list-disc",children:["â€¢ ",e]},t))})]})]})]})]})},`${e.symbol}-${e.report_date}-${t}`))})}},7064:function(e,t,s){"use strict";s.d(t,{h:function(){return l}});var a=s(7437),r=s(2869),n=s(7168),i=s(4766);function l({title:e,description:t,onRefresh:s,refreshing:l=!1,showRefresh:c=!0}){return(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),t&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[c&&s&&(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:s,disabled:l,className:"flex items-center space-x-2",children:[(0,a.jsx)(n.Z,{className:`h-4 w-4 ${l?"animate-spin":""}`}),(0,a.jsx)("span",{children:"Refresh"})]}),(0,a.jsx)(r.z,{variant:"outline",size:"icon",children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Analytics User"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Personal Dashboard"})]}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:"U"})})]})]})]})})}},6815:function(e,t,s){"use strict";s.d(t,{_:function(){return o}});var a=s(7437),r=s(2265),n=s(6394),i=s(7712),l=s(4508);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.f,{ref:s,className:(0,l.cn)(c(),e),...t}));o.displayName=n.f.displayName},3647:function(e,t,s){"use strict";s.d(t,{Bw:function(){return p},Ph:function(){return d},Ql:function(){return f},i4:function(){return h},ki:function(){return m}});var a=s(7437),r=s(2265),n=s(1346),i=s(875),l=s(2135),c=s(401),o=s(4508);let d=n.fC;n.ZA;let m=n.B4,h=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(n.xz,{ref:r,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=n.xz.displayName;let x=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})}));x.displayName=n.u_.displayName;let u=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})}));u.displayName=n.$G.displayName;let p=r.forwardRef(({className:e,children:t,position:s="popper",...r},i)=>(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:i,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[(0,a.jsx)(x,{}),(0,a.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(u,{})]})}));p.displayName=n.VY.displayName,r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=n.__.displayName;let f=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(n.ck,{ref:r,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:t})]}));f.displayName=n.ck.displayName,r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=n.Z0.displayName},4972:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3085:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},6865:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},257:function(e,t,s){"use strict";var a,r;e.exports=(null==(a=s.g.process)?void 0:a.env)&&"object"==typeof(null==(r=s.g.process)?void 0:r.env)?s.g.process:s(4227)},4227:function(e){!function(){var t={229:function(e){var t,s,a,r=e.exports={};function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}}();var c=[],o=!1,d=-1;function m(){o&&a&&(o=!1,a.length?c=a.concat(c):d=-1,c.length&&h())}function h(){if(!o){var e=l(m);o=!0;for(var t=c.length;t;){for(a=c,c=[];++d<t;)a&&a[d].run();d=-1,t=c.length}a=null,o=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function u(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new x(e,t)),1!==c.length||o||l(h)},x.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=u,r.addListener=u,r.once=u,r.off=u,r.removeListener=u,r.removeAllListeners=u,r.emit=u,r.prependListener=u,r.prependOnceListener=u,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},s={};function a(e){var r=s[e];if(void 0!==r)return r.exports;var n=s[e]={exports:{}},i=!0;try{t[e](n,n.exports,a),i=!1}finally{i&&delete s[e]}return n.exports}a.ab="//";var r=a(229);e.exports=r}()}},function(e){e.O(0,[73,312,594,383,478,117,744],function(){return e(e.s=1627)}),_N_E=e.O()}]);