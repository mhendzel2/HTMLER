(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[424],{4921:function(e,t,s){Promise.resolve().then(s.bind(s,1444))},1444:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var n=s(7437),r=s(2265),a=s(6070),i=s(2869),c=s(5186),o=s(5974),l=s(2339),d=s(7168),u=s(3247),f=s(8420),x=s(525),m=s(3085),h=s(4508);function p(){let[e,t]=(0,r.useState)([]),[s,p]=(0,r.useState)(""),[g,v]=(0,r.useState)([]),[y,j]=(0,r.useState)([]),[b,N]=(0,r.useState)(!0),[w,k]=(0,r.useState)(""),Z=async()=>{try{N(!0);let e=await fetch("/api/institutions");if(e.ok){let s=await e.json();t(s.data||[])}}catch(e){console.error("Error fetching institutions:",e)}finally{N(!1)}},C=async e=>{if(e)try{N(!0);let[t,s]=await Promise.all([fetch(`/api/institutions/${encodeURIComponent(e)}/holdings`),fetch(`/api/institutions/${encodeURIComponent(e)}/activity`)]);if(t.ok){let e=await t.json();v(e.data||[])}if(s.ok){let e=await s.json();j(e.data||[])}}catch(e){console.error("Error fetching institution data:",e)}finally{N(!1)}};(0,r.useEffect)(()=>{Z()},[]),(0,r.useEffect)(()=>{s&&C(s)},[s]);let S=e.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())||e.type.toLowerCase().includes(w.toLowerCase())),F=e=>e>=1e9?`$${(e/1e9).toFixed(1)}B`:e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(1)}K`:`$${e.toFixed(0)}`,L=e=>e>=1e6?`${(e/1e6).toFixed(2)}M`:e>=1e3?`${(e/1e3).toFixed(2)}K`:e.toLocaleString(),M=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600",R=e=>{switch(e.toLowerCase()){case"buy":case"increase":return"bg-green-100 text-green-800 border-green-200";case"sell":case"decrease":return"bg-red-100 text-red-800 border-red-200";case"hold":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return(0,n.jsxs)("div",{className:"flex-1 space-y-6 p-8 overflow-auto",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Institutional Analysis"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Track institutional holdings and trading activity"})]}),(0,n.jsxs)(i.z,{onClick:Z,disabled:b,children:[(0,n.jsx)(d.Z,{className:(0,h.cn)("h-4 w-4 mr-2",b&&"animate-spin")}),"Refresh"]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsx)(a.ll,{children:"Institutions"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(u.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(c.I,{placeholder:"Search institutions...",value:w,onChange:e=>k(e.target.value),className:"pl-8"})]})]}),(0,n.jsx)(a.aY,{className:"p-0",children:(0,n.jsx)("div",{className:"max-h-96 overflow-y-auto",children:b?(0,n.jsxs)("div",{className:"p-4 text-center",children:[(0,n.jsx)(d.Z,{className:"h-4 w-4 animate-spin mx-auto mb-2"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading institutions..."})]}):(0,n.jsx)("div",{className:"space-y-1",children:S.map(e=>(0,n.jsx)("button",{onClick:()=>p(e.name),className:(0,h.cn)("w-full p-3 text-left hover:bg-muted/50 transition-colors border-b last:border-0",s===e.name&&"bg-muted"),children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"text-sm font-medium truncate",children:e.name}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,n.jsx)(o.C,{variant:"outline",className:"text-xs",children:e.type}),(0,n.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.holding_count," holdings"]})]})]})]})},e.name))})})})]}),(0,n.jsx)("div",{className:"lg:col-span-2",children:s?(0,n.jsxs)(l.mQ,{defaultValue:"holdings",className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-semibold",children:s}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Institutional analysis"})]}),(0,n.jsxs)(l.dr,{children:[(0,n.jsx)(l.SP,{value:"holdings",children:"Holdings"}),(0,n.jsx)(l.SP,{value:"activity",children:"Activity"})]})]}),(0,n.jsx)(l.nU,{value:"holdings",className:"space-y-4",children:(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsx)(a.ll,{children:"Top Holdings"}),(0,n.jsx)(a.SZ,{children:"Largest positions in the portfolio"})]}),(0,n.jsx)(a.aY,{children:b?(0,n.jsxs)("div",{className:"text-center py-4",children:[(0,n.jsx)(d.Z,{className:"h-4 w-4 animate-spin mx-auto mb-2"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading holdings..."})]}):0===g.length?(0,n.jsx)("p",{className:"text-center py-4 text-muted-foreground",children:"No holdings data available."}):(0,n.jsx)("div",{className:"space-y-3",children:g.slice(0,15).map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsxs)("div",{className:"text-xs text-muted-foreground w-6",children:["#",t+1]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.C,{variant:"outline",className:"font-mono",children:e.ticker}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1 truncate max-w-48",children:e.company_name})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"font-semibold",children:F(e.value)}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,n.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.percentage_of_portfolio?.toFixed(1),"%"]}),0!==e.change_percentage&&(0,n.jsxs)("span",{className:(0,h.cn)("text-xs flex items-center",M(e.change_percentage)),children:[e.change_percentage>0?(0,n.jsx)(x.Z,{className:"h-3 w-3 mr-1"}):(0,n.jsx)(m.Z,{className:"h-3 w-3 mr-1"}),Math.abs(e.change_percentage).toFixed(1),"%"]})]})]})]},e.ticker))})})]})}),(0,n.jsx)(l.nU,{value:"activity",className:"space-y-4",children:(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsx)(a.ll,{children:"Recent Activity"}),(0,n.jsx)(a.SZ,{children:"Latest trading activity and position changes"})]}),(0,n.jsx)(a.aY,{children:b?(0,n.jsxs)("div",{className:"text-center py-4",children:[(0,n.jsx)(d.Z,{className:"h-4 w-4 animate-spin mx-auto mb-2"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading activity..."})]}):0===y.length?(0,n.jsx)("p",{className:"text-center py-4 text-muted-foreground",children:"No recent activity data available."}):(0,n.jsx)("div",{className:"space-y-3",children:y.slice(0,15).map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(o.C,{variant:"outline",className:"font-mono",children:e.ticker}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.C,{className:R(e.action),children:e.action}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:new Date(e.date).toLocaleDateString()})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("p",{className:"font-semibold",children:[L(e.shares)," shares"]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:F(e.value)})]})]},t))})})]})})]}):(0,n.jsx)(a.Zb,{children:(0,n.jsxs)(a.aY,{className:"p-8 text-center",children:[(0,n.jsx)(f.Z,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Select an institution to view details"})]})})})]})]})}},5974:function(e,t,s){"use strict";s.d(t,{C:function(){return c}});var n=s(7437);s(2265);var r=s(7712),a=s(4508);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:t,...s}){return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:t}),e),...s})}},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var n=s(7437),r=s(2265),a=s(7053),i=s(7712),c=s(4508);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...i},l)=>{let d=r?a.g7:"button";return(0,n.jsx)(d,{className:(0,c.cn)(o({variant:t,size:s,className:e})),ref:l,...i})});l.displayName="Button"},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var n=s(7437),r=s(2265),a=s(4508);let i=r.forwardRef(({className:e,...t},s)=>(0,n.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let c=r.forwardRef(({className:e,...t},s)=>(0,n.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));c.displayName="CardHeader";let o=r.forwardRef(({className:e,...t},s)=>(0,n.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let l=r.forwardRef(({className:e,...t},s)=>(0,n.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let d=r.forwardRef(({className:e,...t},s)=>(0,n.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>(0,n.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},5186:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var n=s(7437),r=s(2265),a=s(4508);let i=r.forwardRef(({className:e,type:t,...s},r)=>(0,n.jsx)("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));i.displayName="Input"},2339:function(e,t,s){"use strict";s.d(t,{SP:function(){return l},dr:function(){return o},mQ:function(){return c},nU:function(){return d}});var n=s(7437),r=s(2265),a=s(1312),i=s(4508);let c=a.fC,o=r.forwardRef(({className:e,...t},s)=>(0,n.jsx)(a.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));o.displayName=a.aV.displayName;let l=r.forwardRef(({className:e,...t},s)=>(0,n.jsx)(a.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));l.displayName=a.xz.displayName;let d=r.forwardRef(({className:e,...t},s)=>(0,n.jsx)(a.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));d.displayName=a.VY.displayName},4508:function(e,t,s){"use strict";s.d(t,{Z8:function(){return l},cn:function(){return a},fP:function(){return c},p6:function(){return o},xG:function(){return i}});var n=s(1994),r=s(3335);function a(...e){return(0,r.m6)((0,n.W)(e))}function i(e,t="USD"){let s="string"==typeof e?parseFloat(e):e;return isNaN(s)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(s)}function c(e){let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"0":t>=1e9?`${(t/1e9).toFixed(2)}B`:t>=1e6?`${(t/1e6).toFixed(2)}M`:t>=1e3?`${(t/1e3).toFixed(2)}K`:t.toFixed(0)}function o(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function l(){let e=new Date(new Date().toLocaleString("en-US",{timeZone:"America/New_York"})),t=e.getHours(),s=e.getMinutes(),n=e.getDay();if(0===n||6===n)return"closed";let r=60*t+s;return r<570?"pre-market":r>=570&&r<960?"open":"after-hours"}},8420:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},7168:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3085:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},525:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}},function(e){e.O(0,[73,312,478,117,744],function(){return e(e.s=4921)}),_N_E=e.O()}]);