(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6202:function(e,t,n){Promise.resolve().then(n.bind(n,169)),Promise.resolve().then(n.t.bind(n,911,23)),Promise.resolve().then(n.t.bind(n,7960,23))},169:function(e,t,n){"use strict";n.d(t,{Providers:function(){return g}});var a=n(7437),i=n(2265),o=["light","dark"],s="(prefers-color-scheme: dark)",r="undefined"==typeof window,l=i.createContext(void 0),c=e=>i.useContext(l)?e.children:i.createElement(m,{...e}),d=["light","dark"],m=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:a=!0,storageKey:r="theme",themes:c=d,defaultTheme:m=n?"system":"light",attribute:b="data-theme",value:v,children:w,nonce:g})=>{let[$,S]=i.useState(()=>h(r,m)),[k,p]=i.useState(()=>h(r)),C=v?Object.values(v):c,_=i.useCallback(e=>{let i=e;if(!i)return;"system"===e&&n&&(i=y());let s=v?v[i]:i,r=t?f():null,l=document.documentElement;if("class"===b?(l.classList.remove(...C),s&&l.classList.add(s)):s?l.setAttribute(b,s):l.removeAttribute(b),a){let e=o.includes(m)?m:null,t=o.includes(i)?i:e;l.style.colorScheme=t}null==r||r()},[]),E=i.useCallback(e=>{let t="function"==typeof e?e(e):e;S(t);try{localStorage.setItem(r,t)}catch(e){}},[e]),N=i.useCallback(t=>{p(y(t)),"system"===$&&n&&!e&&_("system")},[$,e]);i.useEffect(()=>{let e=window.matchMedia(s);return e.addListener(N),N(e),()=>e.removeListener(N)},[N]),i.useEffect(()=>{let e=e=>{e.key===r&&E(e.newValue||m)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[E]),i.useEffect(()=>{_(null!=e?e:$)},[e,$]);let T=i.useMemo(()=>({theme:$,setTheme:E,forcedTheme:e,resolvedTheme:"system"===$?k:$,themes:n?[...c,"system"]:c,systemTheme:n?k:void 0}),[$,E,e,k,n,c]);return i.createElement(l.Provider,{value:T},i.createElement(u,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:a,storageKey:r,themes:c,defaultTheme:m,attribute:b,value:v,children:w,attrs:C,nonce:g}),w)},u=i.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:a,enableColorScheme:r,defaultTheme:l,value:c,attrs:d,nonce:m})=>{let u="system"===l,h="class"===n?`var d=document.documentElement,c=d.classList;c.remove(${d.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=r?(o.includes(l)?l:null)?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=(e,t=!1,a=!0)=>{let i=c?c[e]:e,s=t?e+"|| ''":`'${i}'`,l="";return r&&a&&!t&&o.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===n?t||i?l+=`c.add(${s})`:l+="null":i&&(l+=`d[s](n,${s})`),l},b=e?`!function(){${h}${y(e)}}()`:a?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${s}',m=window.matchMedia(t);if(m.media!==t||m.matches){${y("dark")}}else{${y("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}${u?"":"else{"+y(l,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}else{${y(l,!1,!1)};}${f}}catch(t){}}();`;return i.createElement("script",{nonce:m,dangerouslySetInnerHTML:{__html:b}})}),h=(e,t)=>{let n;if(!r){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},f=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},y=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light");function b({children:e,...t}){return(0,a.jsx)(c,{...t,children:e})}let v=(0,i.createContext)(void 0);function w({children:e}){let[t,n]=(0,i.useState)([]),[o,s]=(0,i.useState)(!1),r=(0,i.useCallback)(async(e,t)=>{if(0!==e.length){s(!0);try{let a=await fetch(`/api/data/news?tickers=${e.join(",")}&limit=30&hours=48&min_impact_score=${"earnings"===t?"5":"0"}`);if(a.ok){let i=(await a.json()).news||[];n(e=>{let t=new Set(e.map(e=>e.id));return[...i.filter(e=>!t.has(e.id)),...e].slice(0,100)}),t&&i.length>0&&"Notification"in window&&("granted"===Notification.permission?new Notification(`New ${t} news available`,{body:`${i.length} articles found for ${e.join(", ")}`,icon:"/favicon.ico"}):"denied"!==Notification.permission&&Notification.requestPermission().then(n=>{"granted"===n&&new Notification(`New ${t} news available`,{body:`${i.length} articles found for ${e.join(", ")}`,icon:"/favicon.ico"})}))}}catch(e){console.error("Failed to fetch news for tickers:",e)}finally{s(!1)}}},[]),l=(0,i.useCallback)(async()=>{s(!0);try{let e=await fetch("/api/data/news?limit=50&hours=24");if(e.ok){let t=await e.json();n(t.news||[])}}catch(e){console.error("Failed to fetch general news:",e)}finally{s(!1)}},[]),c=(0,i.useCallback)(()=>{n([])},[]);return(0,a.jsx)(v.Provider,{value:{news:t,loading:o,fetchNewsForTickers:r,fetchGeneralNews:l,clearNews:c},children:e})}function g({children:e}){let[t,n]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{n(!0)},[]),t)?(0,a.jsx)(b,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:(0,a.jsx)(w,{children:e})}):(0,a.jsx)("div",{className:"min-h-screen bg-background"})}},7960:function(){},911:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(e){e.O(0,[944,478,117,744],function(){return e(e.s=6202)}),_N_E=e.O()}]);